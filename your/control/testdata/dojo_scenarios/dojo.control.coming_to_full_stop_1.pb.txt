name: "dojo.control.coming_to_full_stop_1"
edit_attr {
  description: "Control dojo scenario: coming to full stop at a straight lane."
  test_sets: "dojo"
  test_sets: "control_virtual_coverage"
}
execution {
  sim_duration: 20
  playback_sources { run_or_stf_path: "" }
  sim_modules {
    perception_module { module: PERCEPTION_MODULE playback_source_id: 0 }
    positioning_module { module: POSITIONING_MODULE playback_source_id: 0 }
    vehicle_control_module { module: VEHICLE_CONTROL_MODULE enable: true }
    spin_publisher_module { module: SPIN_PUBLISHER_MODULE disable: true }
    gnss_imu_driver_module {
      module: GNSS_IMU_DRIVER_MODULE
      playback_source_id: 0
    }
    image_publisher_module { module: IMAGE_PUBLISHER_MODULE disable: true }
    vantage_forwarding_module { module: VANTAGE_FORWARDING_MODULE enable: true }
    simulation_vehicle_module {
      module: SIMULATION_VEHICLE_MODULE
      enable: true
      module_conf {
        [qcraft.SimVehicleConf.sim_vehicle_conf] {
          engage_start_time: 1
          initial_pose {
            pos_smooth { x: 185 y: -3.5 }
            vel_body { x: 11.0 y: 0.0 }
            accel_body { x: 0.0 y: 0.0 }
            yaw: 0.0
          }
        }
      }
    }
    can_bus_module { module: CAN_BUS_MODULE disable: true }
    autonomy_state_module { module: AUTONOMY_STATE_MODULE enable: true }
    planner_module { module: PLANNER_MODULE enable: true }
    virtual_object_module {
      module: VIRTUAL_OBJECT_MODULE
      enable: true
      module_conf {
        [qcraft.VirtualObjectsConfProto.virtual_objects_conf] {
          sim_world_conf {
            publish_tl_states: true
            tl_control {
              tl_periods {
                state {
                  traffic_light_id: 927
                  color: TL_GREEN
                  shape: TLS_ROUND
                  score: 1.0
                }
              }
            }
          }
        }
      }
    }
    online_simulation_module { module: ONLINE_SIMULATION_MODULE disable: true }
    create_sim_messages_module {
      module: CREATE_SIM_MESSAGES_MODULE
      disable: true
    }
    remote_assist_module { module: REMOTE_ASSIST_MODULE enable: true }
    vision_module { module: VISION_MODULE playback_source_id: 0 }
    routing_module { module: ROUTING_MODULE enable: true }
    mock_localization_module { module: MOCK_LOCALIZATION_MODULE enable: true }
  }
}
metrics {
  name: "enter_cruise_metric"
  enter_cruise_metric {}
}
metrics {
  name: "execution_issue_metric"
  execution_issue_metric {}
}
metrics {
  name: "collision_metric"
  collision_metric {}
}
metrics {
  name: "stats_metric"
  stats_metric {}
}
metrics {
  name: "trajectory_validation_metric"
  trajectory_validation_metric {}
}
metrics {
  name: "speed_range_metric"
  speed_range_metric { desired_speed_ranges { min_speed: 0.5 } }
}
metrics {
  name: "control_performance_metric"
  control_performance_metric {}
}
commandline_flags: "--map=dojo"
commandline_flags: "--route_str=b7_e3_end"
commandline_flags: "--remote_control_server_address=127.0.0.1"
